<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Version control</title>
    <meta charset="utf-8" />
    <meta name="author" content="Jeff Stevens" />
    <meta name="date" content="2022-01-29" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <link href="libs/tachyons-4.12.0/tachyons.min.css" rel="stylesheet" />
    <script src="libs/fabric-4.3.1/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble-0.0.1/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble-0.0.1/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#035AA6"],"pen_size":3,"eraser_size":30}) })</script>
    <link href="libs/xaringanExtra-extra-styles-0.2.6/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="dsvr.css" type="text/css" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Version control
## Data science and visualization in R
### Jeff Stevens
### 2022-01-29

---




# Version control

&lt;img src="../images/final_docs.gif", width = 32%, style = "position:absolute; top: 17%; left: 35%"&gt;&lt;/img&gt;

---

# What is Git?

1. Version control

1. Collaboration

1. Dissemination

&lt;img src="../images/git_logo.png", width = 30%, style = "position:absolute; top: 45%; left: 35%"&gt;&lt;/img&gt;

---

# What Git does

1. Git creates repositories for projects

1. Git is built for plain text files

1. Git stores differences (diffs) between versions of files

1. Git let's you revert to previous versions

1. Git let's you build alternative branches that maintain your main branch


---

# What about GitHub?

1. GitHub is a website allowing storage of public and private repositories

1. GitHub is one of several repo hosting services (but the most popular)

1. GitHub allows you to share your repos with others (controlling different levels of access)

1. GitHub allows you to create 'organizations'

1. You can create your own website on GitHub for free

&lt;img src="../images/github_logo.png", width = 20%, style = "position:absolute; top: 75%; left: 25%"&gt;&lt;/img&gt;
&lt;img src="../images/octocat.png", width = 18%, style = "position:absolute; top: 67%; left: 45%"&gt;&lt;/img&gt;

---

# Git and GitHub

.pull-left[
* Git is on your computer and tracks changes only on that local version. 

* GitHub is in the cloud and acts as a backup, collaboration tool, and dissemination platform.

* Unlike Box and OneDrive, Git and GitHub do not automatically sync file changes. You must `push` and `pull`.
]

&lt;img src="../images/git_pull_push_stories_freepik.png", width = 40%, style = "position:absolute; top: 20%; left: 55%"&gt;&lt;/img&gt;

&lt;figcaption, style = "font-size: 0.5rem; position:absolute; top: 97%; left: 70%"&gt;Source: &lt;a href = "https://www.freepik.com/free-vector/static-asset-illustration-concept_6195521.htm"&gt;stories at freepik.com&lt;/a&gt;&lt;/figcaption&gt;

---

# Git overview

&lt;img src="../images/git_overview.png", width = 60%, style = "position:absolute; top: 20%; left: 20%"&gt;&lt;/img&gt;

---

# Gitting started

## Open terminal

* Windows: Press .keybutton[&amp;#8862; `Win`] then type `cmd`.

* MacOS: Press .keybutton[`Cmd`]+.keybutton[`Space`] then type `terminal`.

--

## Configure Git

* Add name and email
```{}
git config --global user.name '&lt;Your name&gt;'
git config --global user.email '&lt;Your email&gt;'
```

---

# Gitting started

## Change to where you want this directory

```{}
cd Documents/testing/
```



---

# Gitting started

## Create Git repo

* Create new directory `git_test/` 
```{}
mkdir git_test
```

--

* Change to that directory 
```{}
cd git_test
```

--

* Initialize Git repo
```{}
git init
```

---

# Ignoring files

Add files, file types, and directories to `.gitignore` to prevent Git from tracking them

* R gitignore template: https://www.toptal.com/developers/gitignore/api/r

&lt;img src="../images/gitignore.png", width = 65%, style = "position:absolute; top: 45%; left: 18%"&gt;&lt;/img&gt;


---

### 

# Checking in

`git status`

* Which branch

* Checks whether local repo is up-to-date with _remote_

* Staged files ready for commit

* Untracked files



---

# Staging files

`git add`

* To stage all changed and untracked files, use `git add .`

* To stage a specific files or subdirectory, use 

  - `git add filename`
  
  - `git add file1 file2 subdirectory/myfile*`
  
  - `git add directory/`

* To unstage all staged files, use `git reset` (this will **NOT** delete your files)




---

# Commit files

`git commit -m "Commit message"`

* Takes snapshot

--

* Must include commit message

&lt;img src="../images/git_commit_xkcd.png", width = 50%, style = "position:absolute; top: 30%; left: 48%"&gt;&lt;/img&gt;

&lt;figcaption, style = "font-size: 0.5rem; position:absolute; top: 95%; left: 70%"&gt;Source: &lt;a href = "https://xkcd.com/1296/"&gt;xkcd&lt;/a&gt;&lt;/figcaption&gt;



---

# Commit messages

[Writing good commit messages](https://chris.beams.io/posts/git-commit/)
  - Subject should describe change in as few words as possible (&lt;50 characters)

  - Start subject with an imperative verb ("This commit will...")
      - `Add .gitignore file`
      
      - `Fix typo in abstract`
      
  - Captialize first word but don't end with period
  
  - Give more details in body


---

# Working with remotes

&lt;img src="../images/git_pull_push_stories_freepik.png", width = 50%, style = "position:absolute; top: 20%; left: 25%"&gt;&lt;/img&gt;

&lt;figcaption, style = "font-size: 0.5rem; position:absolute; top: 97%; left: 45%"&gt;Source: &lt;a href = "https://www.freepik.com/free-vector/static-asset-illustration-concept_6195521.htm"&gt;stories at freepik.com&lt;/a&gt;&lt;/figcaption&gt;



---

# Working with remotes

## Setting up remotes

#### Create remote repo

&lt;img src="../images/github_new_repo.png", width = 90%, style = "position:absolute; top: 50%; left: 5%"&gt;&lt;/img&gt;



---

# Working with remotes

## Setting up remotes

`git remote add origin &lt;remote URL&gt;`

--

## Viewing remotes

`git remote -v`

--
## Changing remotes

`git remote set-url origin &lt;new remote URL&gt;`



---

# Working with remotes

&lt;img src="../images/git_pull_stories_freepik.png", width = 40%, style = "position:absolute; top: 25%; left: 5%"&gt;&lt;/img&gt;


--

.pull-right[
`git pull`

* Updates local repo from remote repo

* Always pull before working on shared repo!
]



---

# Working with remotes

&lt;img src="../images/git_push_stories_freepik.png", width = 40%, style = "position:absolute; top: 25%; left: 5%"&gt;&lt;/img&gt;

--

.pull-right[
`git push -u origin main`

`git push`

* Updates remote repo from local repo

* Always push when finished committing on shared repo!
]



---

# Working with remotes

## Cloning existing repositories

`git clone &lt;remote URL&gt;`

--

#### Clone the course repo

First, change to the directory where you want this repo to live (using `cd`). Currently, repo is about 300 MB. Then,

```{}
git clone https://github.com/dsvr2021/dsvr_2021.git
```

---

# Branches

### Different versions of same repo

&lt;img src="../images/git_branches.png", width = 70%, style = "position:absolute; top: 30%; left: 15%"&gt;&lt;/img&gt;

---

# Branches

### Different versions of same repo

### Merge branches

&lt;img src="../images/git_branch_merge.png", width = 80%, style = "position:absolute; top: 20%; left: 15%"&gt;&lt;/img&gt;

---

# Branches

### Different versions of same repo

### Merge branches

### Default branch is called `master`, which you can change to `main`


---

# Git errros

* Merge conflicts

* Force pull from remote
  - `git fetch --all`
  - `git reset --hard origin/main`

* Deleting local `.git` directory

* Re-cloning

* [Oh Shit, Git!?!](https://ohshitgit.com/)

&lt;img src="../images/git_disaster_xkcd.png", width = 35%, style = "position:absolute; top: 5%; left: 52%"&gt;&lt;/img&gt;

&lt;figcaption, style = "font-size: 0.5rem; position:absolute; top: 96%; left: 68%"&gt;Source: &lt;a href = "https://xkcd.com/1597/"&gt;xkcd&lt;/a&gt;&lt;/figcaption&gt;

---

# Resources

* [Happy Git and GitHub for the useR](https://happygitwithr.com/)

* [Dr. Bourke's tutorial](http://cse.unl.edu/~cbourke/gitTutorial.pdf)

* [Git Guide](https://rogerdudler.github.io/git-guide/)

* [Software Carpentry's Version Control with Git](https://swcarpentry.github.io/git-novice/)

* [Pro Git](https://git-scm.com/book/en/v2)

* [git/github guide](https://kbroman.org/github_tutorial/)

* [Git cheatsheet](https://jan-krueger.net/wordpress/wp-content/uploads/2007/09/git-cheat-sheet.pdf)


---

# Homework

### For next class meeting

* Read [Bryan 2017](https://doi.org/10.7287/peerj.preprints.3159v2)

* Configure Git with username and email address
  
* Create and store GitHub Personal Access Token 
  - read [Cache credentials for HTTPS](https://happygitwithr.com/credential-caching.html)

* Create `testing/` directory somewhere safe (probably not in a synced folder)

* Clone [course repo](https://github.com/dsvr2021/dsvr_2021.git)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "tomorrow-night-eighties",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
